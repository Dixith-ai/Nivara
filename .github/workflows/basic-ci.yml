name: Basic CI Pipeline

on:
  push: {}          # run on every push
  pull_request: {}  # run on every PR
  workflow_dispatch: # allow manual runs
    {}

jobs:
  ci:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: "3.10"

      - name: Install tools + requirements
        run: |
          python -m pip install --upgrade pip
          pip install pytest flake8
          if [ -f requirements.txt ]; then
            pip install -r requirements.txt
          fi

      - name: Lint (flake8)
        run: flake8 . || true   # non-blocking for now

      - name: Run tests (pytest)
        run: |
          if ls test_*.py >/dev/null 2>&1 || [ -d tests ]; then
            pytest --maxfail=1 --disable-warnings -q
          else
            echo "No tests found — skipping pytest."
          fi

      - name: Success message
        run: echo "✅ Basic CI Pipeline ran successfully!"
